<header class="app-header">
  <div class="brand-block text-center">
    <a class="brand-link" routerLink="/">
      <img [src]="brandLogo" [alt]="brandTitle" class="brand-logo" />
      {{ brandTitle }}
    </a>
    <p class="brand-tagline">{{ brandTagline }}</p>
  </div>
<button class="menu-toggle d-md-none" type="button" (click)="toggleMenu()" aria-label="Toggle navigation">
  â˜° Menu
</button>

<nav class="menu" [class.open]="isMenuOpen">
  <div class="menu-links">
    <a class="menu-item" [routerLink]="['/']" [queryParams]="{ page: 0 }">Home</a>
    <a
      class="menu-item"
      *ngFor="let c of categories"
      [routerLink]="['/', c.slug]"
      [queryParams]="{ page: 0 }"
      (click)="closeMenu()"
      >{{ c.name }}</a
      >
  </div>
  <div class="menu-actions">
    <ng-container *ngIf="isLoggedIn$ | async; else loggedOut">
      <a *ngIf="isAdmin" class="btn btn-primary btn-sm" routerLink="/admin/users" (click)="closeMenu()">Manage Users</a>
      <a *ngIf="isAdmin" class="btn btn-outline-primary btn-sm" routerLink="/admin/categories" (click)="closeMenu()">Manage Categories</a>
      <a *ngIf="isAdmin" class="btn btn-outline-primary btn-sm" routerLink="/admin/pages" (click)="closeMenu()">Manage Pages</a>
      <a *ngIf="isAdmin" class="btn btn-outline-primary btn-sm" routerLink="/admin/social-links" (click)="closeMenu()">Manage Socials</a>
      <a *ngIf="isAdmin" class="btn btn-outline-primary btn-sm" routerLink="/admin/branding" (click)="closeMenu()">Manage Branding</a>
      <a class="btn btn-outline-primary btn-sm" routerLink="/posts/new" (click)="closeMenu()">New Post</a>
      <a class="btn btn-outline-secondary btn-sm" routerLink="/profile" (click)="closeMenu()">Profile</a>
      <button class="btn btn-outline-secondary btn-sm" (click)="logout()">Logout</button>
    </ng-container>
    <ng-template #loggedOut>
      <!-- Login available via direct URL (/login); hidden from public header -->
    </ng-template>
  </div>
  </nav>
</header>

<router-outlet></router-outlet>

<footer class="mt-3">
  <div class="footer-shell">
    <div class="footer-left">
      <div class="footer-brand">
        <img [src]="brandLogo" [alt]="brandTitle" class="footer-logo-img" />
        <span class="footer-title">{{ brandTitle }}</span>
      </div>
      <div class="footer-search">
        <input type="text" aria-label="Search topics" placeholder="Search topics you want" (keyup.enter)="goToSearch()" [(ngModel)]="footerSearch" />
        <button type="button" (click)="goToSearch()" aria-label="Run search">Search</button>
      </div>
      <div class="footer-contact">
        <div>Contact with us</div>
        <div class="socials">
          <a *ngFor="let s of socialLinks" [href]="s.url" target="_blank" rel="noreferrer" [attr.aria-label]="s.label">
            {{ s.icon || s.label.slice(0, 2) }}
          </a>
        </div>
      </div>
    </div>
    <div class="footer-links" *ngIf="footerPages.length">
      <a *ngFor="let p of footerPages" [routerLink]="['/page', p.slug]">{{ p.title }}</a>
    </div>
  </div>
</footer>
