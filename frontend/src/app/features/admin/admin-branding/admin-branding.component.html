<div class="admin-branding" *ngIf="!loading; else loadingTpl">
  <h3>Site Branding</h3>
  <p class="text-muted">Update the logo and tagline shown in the header and footer.</p>

  <form #f="ngForm" (ngSubmit)="save(f)">
    <div class="card">
      <div class="card-body form-grid">
        <div class="form-group">
          <label for="title">Site name</label>
          <input
            id="title"
            name="title"
            class="form-control"
            [(ngModel)]="form.title"
            required
            maxlength="120"
            placeholder="TuprakNews"
          />
          <small class="text-muted">Shown next to the logo.</small>
        </div>

        <div class="form-group">
          <label>Logo preview</label>
          <div class="logo-preview">
            <img *ngIf="form.logoUrl" [src]="form.logoUrl" alt="Logo preview" />
            <div *ngIf="!form.logoUrl" class="placeholder">No logo set</div>
          </div>
          <div class="btn-row">
            <input type="file" accept="image/*" (change)="onFileSelected($event)" />
          </div>
          <small class="text-muted">You can also paste a URL below.</small>
          <input
            class="form-control mt-2"
            name="logoUrl"
            [(ngModel)]="form.logoUrl"
            placeholder="https://example.com/logo.png"
          />
        </div>

        <div class="form-group">
          <label for="slogan">Tagline</label>
          <textarea
            id="slogan"
            name="slogan"
            class="form-control"
            [(ngModel)]="form.slogan"
            required
            maxlength="200"
            rows="3"
            placeholder="Stories that matter, in one place."
          ></textarea>
          <small class="text-muted">Displayed under the logo.</small>
        </div>
      </div>
      <div class="card-footer d-flex gap-2">
        <button class="btn btn-primary" type="submit" [disabled]="saving || f.invalid">Save</button>
        <div *ngIf="saving" class="text-muted">Saving...</div>
        <div *ngIf="success" class="text-success">{{ success }}</div>
        <div *ngIf="error" class="text-danger">{{ error }}</div>
      </div>
    </div>
  </form>
</div>

<ng-template #loadingTpl>
  <div class="alert alert-info">Loading...</div>
</ng-template>
