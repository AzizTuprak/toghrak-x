@if (post) {
  <div class="post-shell">
    <div class="post-header">
      <button class="btn btn-outline-secondary btn-sm" routerLink="/" aria-label="Back to home">Back</button>
      @if (isAdmin || isOwner) {
        <div class="post-actions">
          <a class="btn btn-outline-primary btn-sm" [routerLink]="['/posts', post.id, 'edit']" aria-label="Edit post">Edit</a>
          <button class="btn btn-outline-danger btn-sm" (click)="deletePost()" [disabled]="deleting" aria-label="Delete post">
            {{ deleting ? 'Deleting...' : 'Delete' }}
          </button>
        </div>
      }
    </div>
    <article class="post-card">
      <h1>{{ post.title }}</h1>
      <div class="post-meta">
        <span class="badge bg-light text-dark">{{ post.categoryName }}</span>
        <span>By {{ post.authorUsername }}</span>
        @if (post.createdAt) {
          <span>{{ post.createdAt | date: 'mediumDate' }}</span>
        }
      </div>
      @if (post.coverImage) {
        <figure class="post-cover">
          <img [src]="post.coverImage" alt="Cover image" loading="lazy" />
        </figure>
      }
      <div class="post-body">
        <p class="post-content">{{ post.content }}</p>
      </div>
      @if (post.imageUrls.length) {
        <div class="post-gallery">
          <h5>Gallery</h5>
          <div class="gallery-grid">
            @for (img of post.imageUrls; track img) {
              <img [src]="img" alt="Gallery image" loading="lazy" />
            }
          </div>
        </div>
      }
    </article>
  </div>
} @else {
  <div class="container mt-4">
    @if (error) {
      <div class="alert alert-danger">{{ error }}</div>
    }
    @if (!error) {
      <div class="alert alert-info">Loading...</div>
    }
  </div>
}

